{% load static tailwind_tags %}
<c-base.base>
<c-slot name="page_title">Profile</c-slot>
<c-slot name="sidebar"><c-base.sidebar /></c-slot>
<c-slot name="content">
<div class="flex items-center justify-center min-h-screen py-4">
        <div class="container max-w-4xl mx-auto overflow-hidden">
                <!-- Futuristic Interface Container -->
                <div class="relative overflow-hidden shadow-lg rounded-xl bg-white/98">
                        <!-- Digital edge glow -->
                        <div class="absolute inset-0 pointer-events-none rounded-xl"></div>
                        <div class="absolute -inset-[0.5px] border border-blue-200 rounded-xl blur-[1px] pointer-events-none"></div>
                        <!-- Profile Panel -->
                        <div class="relative w-full p-6 rounded-xl bg-gradient-to-br from-sky-50/70 via-white/90 to-sky-50/70 digital-panel">
                                <!-- Marble Background Pattern -->
                                <div class="absolute inset-0 pointer-events-none opacity-40"
                                         style="background-image: url('data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%221200%22 height=%22600%22 viewBox=%220 0 1200 600%22%3E%3Cdefs%3E%3ClinearGradient id=%22a%22 gradientUnits=%22userSpaceOnUse%22 x1=%22600%22 y1=%2225%22 x2=%22600%22 y2=%22575%22%3E%3Cstop offset=%220%22 stop-color=%22%230ea5e9%22 stop-opacity=%220.05%22/%3E%3Cstop offset=%221%22 stop-color=%22%230ea5e9%22 stop-opacity=%220.01%22/%3E%3C/linearGradient%3E%3Cfilter id=%22b%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.05%22 numOctaves=%228%22 result=%22noise%22/%3E%3CfeDisplacementMap in2=%22noise%22 scale=%22120%22 xChannelSelector=%22R%22 yChannelSelector=%22G%22/%3E%3C/filter%3E%3Cmask id=%22c%22%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22white%22/%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23b)%22 fill=%22black%22 opacity=%220.7%22/%3E%3C/mask%3E%3C/defs%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22url(%23a)%22 mask=%22url(%23c)%22/%3E%3C/svg%3E')">
                                </div>
                                <!-- Content -->
                                <h2 class="relative mb-6 text-2xl font-semibold text-gray-800">
                                        <span class="absolute -left-3 top-1 w-1.5 h-5 bg-blue-400 shadow-[0_0_6px_rgba(0,150,255,0.6)] pointer-events-none"></span>
                                        Your Profile
                                </h2>
                                <!-- Display messages -->
                                {% if messages %}
                                        <div class="mb-4">
                                                {% for message in messages %}
                                                        <div class="p-3 mb-2 {% if message.tags == 'success' %}bg-green-100 text-green-700 border border-green-300{% elif message.tags == 'error' %}bg-red-100 text-red-700 border border-red-300{% else %}bg-blue-100 text-blue-700 border border-blue-300{% endif %} rounded-lg">
                                                                {{ message }}
                                                        </div>
                                                {% endfor %}
                                        </div>
                                {% endif %}
                                <div class="grid grid-cols-1 gap-6 md:grid-cols-3">
                                        <!-- Left Column: User Information -->
                                        <div class="col-span-1 p-5 bg-white rounded-lg shadow-md">
                                                <div class="flex flex-col items-center">
                                                        <div class="relative w-24 h-24 mb-3 overflow-hidden bg-blue-100 rounded-full group">
                                                                {% if user.authenticate_profile.avatar %}
                                                                        <img src="{{ user.authenticate_profile.avatar.url }}"
                                                                             alt="{{ user.username }}"
                                                                             class="object-cover w-full h-full">
                                                                {% else %}
                                                                        <div class="flex items-center justify-center w-full h-full text-3xl font-semibold text-center text-blue-500">
                                                                                {{ user.first_name|slice:":1" }}{{ user.last_name|slice:":1" }}
                                                                        </div>
                                                                {% endif %}
                                                                <label for="avatar-upload"
                                                                       class="absolute inset-0 flex items-center justify-center transition-opacity bg-black bg-opacity-50 opacity-0 cursor-pointer group-hover:opacity-100">
                                                                        <span class="text-xs font-medium text-white">Change Photo</span>
                                                                </label>
                                                        </div>
                                                        <h3 class="mb-1 text-xl font-semibold text-gray-800">{{ user.get_full_name }}</h3>
                                                        <p class="mb-4 text-sm text-gray-500">@{{ user.username }}</p>
                                                        <div class="w-full p-3 mb-3 rounded-lg bg-blue-50">
                                                                <h4 class="mb-2 text-sm font-medium text-blue-700">Account Details</h4>
                                                                <ul class="space-y-2 text-sm text-gray-600">
                                                                        <li class="flex">
                                                                                <span class="w-24 font-medium">Email:</span>
                                                                                <span>{{ user.email }}</span>
                                                                        </li>
                                                                        <li class="flex">
                                                                                <span class="w-24 font-medium">Joined:</span>
                                                                                <span>{{ user.date_joined|date:"F j, Y" }}</span>
                                                                        </li>
                                                                        <li class="flex">
                                                                                <span class="w-24 font-medium">Last Login:</span>
                                                                                <span>{{ user.last_login|date:"F j, Y" }}</span>
                                                                        </li>
                                                                </ul>
                                                        </div>
                                                        <div class="w-full mt-2">
                                                                <a href="{% url 'password_change' %}"
                                                                   class="flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-blue-700 transition-colors border border-blue-300 rounded-lg hover:bg-blue-50">
                                                                        <svg xmlns="http://www.w3.org/2000/svg"
                                                                             class="w-4 h-4 mr-2"
                                                                             fill="none"
                                                                             viewBox="0 0 24 24"
                                                                             stroke="currentColor">
                                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                                                                        </svg>
                                                                        Change Password
                                                                </a>
                                                        </div>
                                                </div>
                                        </div>
                                        <!-- Right Column: Edit Profile Form -->
                                        <div class="col-span-2 p-5 bg-white rounded-lg shadow-md">
                                                <h3 class="mb-4 text-lg font-semibold text-gray-800">Edit Profile Information</h3>
                                                <form method="post"
                                                      class="relative z-10 space-y-4"
                                                      enctype="multipart/form-data"
                                                      novalidate>
                                                        {% csrf_token %}
                                                        {{ p_form.avatar }} <!-- Hidden file input for avatar -->
                                                        <div class="grid grid-cols-2 gap-4">
                                                                <div class="mb-4">
                                                                        <label for="{{ form.first_name.id_for_label }}"
                                                                               class="block mb-2 text-sm font-medium text-gray-700">
                                                                                First Name
                                                                        </label>
                                                                        {{ form.first_name }}
                                                                        {% if form.first_name.errors %}
                                                                                <div class="mt-1 text-sm text-red-600">
                                                                                        {% for error in form.first_name.errors %}{{ error }}{% endfor %}
                                                                                </div>
                                                                        {% endif %}
                                                                </div>
                                                                <div class="mb-4">
                                                                        <label for="{{ form.last_name.id_for_label }}"
                                                                               class="block mb-2 text-sm font-medium text-gray-700">
                                                                                Last Name
                                                                        </label>
                                                                        {{ form.last_name }}
                                                                        {% if form.last_name.errors %}
                                                                                <div class="mt-1 text-sm text-red-600">
                                                                                        {% for error in form.last_name.errors %}{{ error }}{% endfor %}
                                                                                </div>
                                                                        {% endif %}
                                                                </div>
                                                        </div>
                                                        <div class="mb-4">
                                                                <label for="{{ form.email.id_for_label }}"
                                                                       class="block mb-2 text-sm font-medium text-gray-700">
                                                                        Email
                                                                </label>
                                                                {{ form.email }}
                                                                {% if form.email.errors %}
                                                                        <div class="mt-1 text-sm text-red-600">
                                                                                {% for error in form.email.errors %}{{ error }}{% endfor %}
                                                                        </div>
                                                                {% endif %}
                                                        </div>
                                                        <div class="flex justify-end">
                                                                <button type="submit"
                                                                        class="px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2">
                                                                        Save Changes
                                                                </button>
                                                        </div>
                                                </form>
                                        </div>
                                </div>
                        </div>
                </div>
        </div>
</div>
</c-slot>
</c-base.base>
